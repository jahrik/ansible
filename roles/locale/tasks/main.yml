---
- name: Generate locale.gen
  template:
    src: locale.gen.j2
    dest: /etc/locale.gen
  register: _locale
  tags: [ "locale" ]

- name: Generate locale
  shell: "{{ item }}"
  with_items:
    - locale-gen
    - export LANG="{{ lang }}"
  when: _locale.changed 
  tags: [ "locale" ]

- name: Generate locale.conf
  template:
    src: locale.conf.j2
    dest: /etc/locale.conf
  tags: [ "locale" ]
